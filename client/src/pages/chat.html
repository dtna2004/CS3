<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tin nháº¯n - Dating Web</title>
    <link rel="stylesheet" href="../styles/common.css">
    <link rel="stylesheet" href="../styles/chat.css">
</head>
<body>
    <nav>
        <div class="logo">
            <a href="home.html">Dating Web</a>
        </div>
        <div class="nav-links">
            <a href="profile.html">
                <i class="nav-icon">ğŸ‘¤</i>
                <span class="nav-text">Há»“ sÆ¡</span>
            </a>
            <a href="matching.html">
                <i class="nav-icon">ğŸ’˜</i>
                <span class="nav-text">GhÃ©p cáº·p</span>
            </a>
            <a href="match-management.html">
                <i class="nav-icon">ğŸ‘¥</i>
                <span class="nav-text">Báº¡n bÃ¨</span>
            </a>
            <a href="notifications.html">
                <i class="nav-icon">ğŸ””</i>
                <span class="nav-text">ThÃ´ng bÃ¡o</span>
            </a>
            <a href="settings.html">
                <i class="nav-icon">âš™ï¸</i>
                <span class="nav-text">CÃ i Ä‘áº·t</span>
            </a>
            <a href="#" id="logoutBtn">
                <i class="nav-icon">ğŸšª</i>
                <span class="nav-text">ÄÄƒng xuáº¥t</span>
            </a>
        </div>
    </nav>

    <div class="chat-container">
        <div class="chat-list">
            <div class="chat-list-header">
                <h2>
                    <i class="header-icon">ğŸ’¬</i>
                    Tin nháº¯n
                </h2>
                <div class="search-box">
                    <input type="text" placeholder="TÃ¬m kiáº¿m..." id="searchChat">
                    <i class="search-icon">ğŸ”</i>
                </div>
            </div>
            <div id="chatUsersList" class="chat-users-list"></div>
        </div>
        <div class="chat-messages">
            <div id="messageHeader" class="message-header">
                <img src="../images/default-avatar.png" alt="Avatar" id="chatUserAvatar">
                <div class="user-info">
                    <h3 id="chatUserName">Chá»n ngÆ°á»i Ä‘á»ƒ chat</h3>
                    <span class="user-status" id="userStatus" style="display: none;">Trá»±c tuyáº¿n</span>
                </div>
                <div class="header-actions" style="display: none;" id="chatControls">
                    <button class="btn-video-call" onclick="startVideoCall()">
                        <i class="action-icon">ğŸ“¹</i>
                    </button>
                    <button class="btn-view-profile" onclick="viewProfile()">
                        <i class="action-icon">ğŸ‘¤</i>
                    </button>
                    <button class="btn-suggest-places" onclick="suggestPlaces()">
                        <i class="action-icon">ğŸ½ï¸</i>
                        <span>Gá»£i Ã½ Ä‘á»‹a Ä‘iá»ƒm</span>
                    </button>
                </div>
            </div>
            <div id="messagesContainer" class="messages-container"></div>
            <div class="message-input">
                <button id="emojiButton" class="emoji-button">
                    <i class="emoji-icon">ğŸ˜Š</i>
                </button>
                <input type="text" id="messageInput" placeholder="Nháº­p tin nháº¯n...">
                <button id="sendMessageBtn" onclick="sendMessage()">
                    <i class="send-icon">ğŸ“¨</i>
                </button>
            </div>
        </div>
    </div>

    <!-- Video Call Modal -->
    <div id="videoCallModal" class="video-call-modal" style="display: none;">
        <div class="video-container">
            <video id="localVideo" class="video-box" autoplay muted></video>
            <video id="remoteVideo" class="video-box" autoplay></video>
        </div>
        <div class="video-controls">
            <button class="video-control-btn" onclick="videoCallService.toggleAudio()">
                <i class="btn-icon">ğŸ¤</i>
                <span>Táº¯t tiáº¿ng</span>
            </button>
            <button class="video-control-btn" onclick="videoCallService.toggleVideo()">
                <i class="btn-icon">ğŸ“¹</i>
                <span>Táº¯t camera</span>
            </button>
            <button class="video-control-btn end-call" onclick="videoCallService.endCall()">
                <i class="btn-icon">ğŸ“</i>
                <span>Káº¿t thÃºc</span>
            </button>
        </div>
    </div>

    <!-- Incoming Call Modal -->
    <div id="incomingCallModal" class="incoming-call-modal" style="display: none;">
        <div class="incoming-call-content">
            <h3>Cuá»™c gá»i Ä‘áº¿n tá»« <span id="callerName"></span></h3>
            <div class="incoming-call-actions">
                <button onclick="videoCallService.answerCall()" class="accept-call">
                    <i class="btn-icon">ğŸ“</i>
                    Tráº£ lá»i
                </button>
                <button onclick="videoCallService.rejectCall()" class="reject-call">
                    <i class="btn-icon">âŒ</i>
                    Tá»« chá»‘i
                </button>
            </div>
        </div>
    </div>

    <!-- Waiting Call Modal -->
    <div id="waitingCallModal" class="waiting-call-modal" style="display: none;">
        <div class="waiting-call-content">
            <div class="spinner"></div>
            <h3>Äang chá» tráº£ lá»i...</h3>
            <button onclick="videoCallService.endCall()" class="cancel-call-btn">
                <i class="btn-icon">âŒ</i>
                Há»§y cuá»™c gá»i
            </button>
        </div>
    </div>

    <!-- Emoji Picker -->
    <div id="emojiPicker" class="emoji-picker" style="display: none;">
        <div class="emoji-list">
            <!-- Emoji biá»ƒu cáº£m -->
            <span class="emoji-item" data-emoji="ğŸ˜Š">ğŸ˜Š</span>
            <span class="emoji-item" data-emoji="ğŸ˜‚">ğŸ˜‚</span>
            <span class="emoji-item" data-emoji="ğŸ¥°">ğŸ¥°</span>
            <span class="emoji-item" data-emoji="ğŸ˜">ğŸ˜</span>
            <span class="emoji-item" data-emoji="ğŸ˜˜">ğŸ˜˜</span>
            <span class="emoji-item" data-emoji="ğŸ˜œ">ğŸ˜œ</span>
            <span class="emoji-item" data-emoji="ğŸ¤—">ğŸ¤—</span>
            <span class="emoji-item" data-emoji="ğŸ¤”">ğŸ¤”</span>
            
            <!-- Emoji trÃ¡i tim -->
            <span class="emoji-item" data-emoji="â¤ï¸">â¤ï¸</span>
            <span class="emoji-item" data-emoji="ğŸ’•">ğŸ’•</span>
            <span class="emoji-item" data-emoji="ğŸ’–">ğŸ’–</span>
            <span class="emoji-item" data-emoji="ğŸ’">ğŸ’</span>
            <span class="emoji-item" data-emoji="ğŸ¥º">ğŸ’“</span>
            <span class="emoji-item" data-emoji="ğŸ’—">ğŸ’—</span>
            <span class="emoji-item" data-emoji="ğŸ’˜">ğŸ’˜</span>
            <span class="emoji-item" data-emoji="ğŸ’">ğŸ’</span>

            <!-- Emoji hÃ nh Ä‘á»™ng -->
            <span class="emoji-item" data-emoji="ğŸ‘‹">ğŸ‘‹</span>
            <span class="emoji-item" data-emoji="ğŸ‘">ğŸ‘</span>
            <span class="emoji-item" data-emoji="ğŸ‘">ğŸ‘</span>
            <span class="emoji-item" data-emoji="ğŸ™Œ">ğŸ™Œ</span>
            <span class="emoji-item" data-emoji="ğŸ¤">ğŸ¤</span>
            <span class="emoji-item" data-emoji="âœŒï¸">âœŒï¸</span>
            <span class="emoji-item" data-emoji="ğŸ¤">ğŸ¤</span>
            <span class="emoji-item" data-emoji="ğŸ‘Œ">ğŸ‘Œ</span>

            <!-- Emoji Ä‘á»“ Äƒn vÃ  hoa -->
            <span class="emoji-item" data-emoji="ğŸ•">ğŸ•</span>
            <span class="emoji-item" data-emoji="ğŸœ">ğŸœ</span>
            <span class="emoji-item" data-emoji="ğŸ·">ğŸ·</span>
            <span class="emoji-item" data-emoji="ğŸ°">ğŸ°</span>
            <span class="emoji-item" data-emoji="ğŸŒ¹">ğŸŒ¹</span>
            <span class="emoji-item" data-emoji="ğŸŒ¸">ğŸŒ¸</span>
            <span class="emoji-item" data-emoji="âœ¨">âœ¨</span>
            <span class="emoji-item" data-emoji="ğŸŒŸ">ğŸŒŸ</span>
        </div>
    </div>

    <!-- Places Suggestion Modal -->
    <div id="placesSuggestionModal" class="places-modal" style="display: none;">
        <div class="places-modal-content">
            <div class="places-modal-header">
                <h3>Gá»£i Ã½ Ä‘á»‹a Ä‘iá»ƒm háº¹n hÃ²</h3>
                <button onclick="closePlacesModal()" class="close-modal">Ã—</button>
            </div>
            <div class="places-modal-body">
                <div class="places-filters">
                    <select id="placeType">
                        <option value="restaurant">NhÃ  hÃ ng</option>
                        <option value="cafe">QuÃ¡n cafÃ©</option>
                        <option value="bar">QuÃ¡n bar</option>
                    </select>
                    <select id="priceLevel">
                        <option value="">Má»i má»©c giÃ¡</option>
                        <option value="1">GiÃ¡ ráº»</option>
                        <option value="2">Trung bÃ¬nh</option>
                        <option value="3">Cao cáº¥p</option>
                    </select>
                </div>
                <div id="placesList" class="places-list"></div>
                <div id="placesMap" class="places-map"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="../js/constants.js"></script>
    <script src="../js/services/videoCall.js"></script>
    <script src="../js/chat.js"></script>
    <script src="../js/notificationBadge.js"></script>
    <script src="../js/common.js"></script>
    <script>
        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('token');
            localStorage.removeItem('userId');
            window.location.href = 'login.html';
        });
    </script>
</body>
</html> 